name: Issues and PR Handler

on:
  issues:
    types: [opened, closed]
  pull_request:
    types: [opened, closed]
permissions:
  issues: write
  pull-requests: write

jobs:
  comment:
    runs-on: ubuntu-latest
    env:
          GH_TOKEN: ${{ secrets.BOT_PAT }}
    steps:
      # 🆕 Issue opened
      - name: Comment on issue opened
        if: github.event_name == 'issues' && github.event.action == 'opened'
        run: |
          gh issue comment ${{ github.event.issue.number }} \
            --body "👋 Thanks for opening this issue, @${{ github.event.issue.user.login }}! We'll take a look soon."
        

      # 🛑 Issue closed as "not planned"
      - name: Comment on issue closed as not planned
        if: github.event_name == 'issues' && github.event.action == 'closed' && github.event.issue.state_reason == 'not_planned'
        run: |
          gh issue comment ${{ github.event.issue.number }} \
            --body "⚠️ This issue was closed as 'not planned'. If you believe it still needs attention, feel free to reopen or clarify further."
     

      # 📁 Issue closed normally
      - name: Comment on issue closed normally
        if: github.event_name == 'issues' && github.event.action == 'closed' && github.event.issue.state_reason != 'not_planned'
        run: |
          gh issue comment ${{ github.event.issue.number }} \
            --body "✅ This issue has been closed. Thanks for contributing, @${{ github.event.issue.user.login }}!"
      

      # 🚀 PR opened
      - name: Comment on PR opened
        if: github.event_name == 'pull_request' && github.event.action == 'opened'
        run: |
          gh issue comment ${{ github.event.pull_request.number }} \
            --repo ${{ github.repository }} \
            --body "🚀 Thanks for the PR, @${{ github.event.pull_request.user.login }}! @ReaveND will review it shortly!"
    

      
      # ❌ PR closed without merging
      - name: Comment on PR closed without merge
        if: github.event_name == 'pull_request' && github.event.action == 'closed' && !github.event.pull_request.merged
        run: |
          gh issue comment ${{ github.event.pull_request.number }} \
            --repo ${{ github.repository }} \
            --body "❌ This PR was closed without merging. If you’d like to revisit it, feel free to reopen or submit a new one."
      

      
      # 📦 PR merged
      - name: Comment on PR merged
        if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged
        run: |
          gh issue comment ${{ github.event.pull_request.number }} \
            --repo ${{ github.repository }} \
            --body "🎉 PR merged by @ReaveND! Great work, @${{ github.event.pull_request.user.login }}. Thanks for contributing!"
     


